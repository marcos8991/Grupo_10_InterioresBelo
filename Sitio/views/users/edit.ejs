<!DOCTYPE html>
<html lang="en">
<%- include('../partials/head') %> 
<body class="edit">
    <%- include('../partials/header') %> 
    <main>
     <div class="row mx-auto">
          <div class="col-lg-6 mt-5 mb-5 mx-auto">
            <div class="card shadow mb-2">
                <div class="card-header">
                    <h4>Editar producto</h4>
                </div>
                <div class="card-body">
                    <form action="/products/update/<%= product.id %>?_method=PUT" class="mx-auto" method="POST" id="form-edit-product">
                        <div class="col-8">
                          <label for="name" class="form-label">Nombre de Producto</label>
                          <input type="text" placeholder = "Nombre del producto" class="form-control <%= locals.errors && errors.name ? 'is-invalid' : null %>" id="name" name="name" value="<%= product.name %> "> 
                          <span class="text-danger small" id="error-name"><%= locals.errors && errors.name ? errors.name.msg : null%> </span>
                        </div>

                        <div class="col-8">
                            <label for="price" class="form-label">Precio</label>
                            <input type="number" class="form-control  <%= locals.errors && errors.price ? 'is-invalid' : null %>" id="price" name="price" placeholder="$" value="<%= product.price %>">
                            <span class="text-danger small" id="error-price"><%= locals.errors && errors.price ? errors.price.msg : null%></span>
                          </div>

                          <div class="col-8">
                            <label for="discount" class="form-label">Cuotas</label>
                            <select id="discount" class="form-select" name="discount">
                                <option value="" hidden>Elegir cuotas</option>
                                <option value="hasta 3 cuotas" <%= product.discount === 'hasta 3 cuotas' ? 'selected' : null %> >Hasta 3 cuotas</option>
                                <option value="hasta 6 cuotas" <%= product.discount === 'hasta 6 cuotas' ? 'selected' : null %> >Hasta 6 cuotas</option>
                                <option value="hasta 12 cuotas" <%= product.discount === 'hasta 12 cuotas'? 'selected' : null %> >Hasta 12 cuotas</option>
                                <option value="hasta 18 cuotas" <%= product.discount === 'hasta 18 cuotas' ? 'selected' : null %> >Hasta 18 cuotas</option>
                              </select>
                              <span class="text-danger small" id="error-discount"><%= locals.errors && errors.discount ? errors.discount.msg : null%></span>
                          </div>
                          
                          
                          <div class="col-8">
                            <label for="section" class="form-label">Sección</label>
                            <select id="section" class="form-select" name="section">
                                <option value="" selected hidden>Elegir sección</option>
                                <% sections.forEach(section => { %>
                                  <option value="<%= section.id %>" <%= product.sectionId === section.id ? 'selected' : null %>><%= section.name%></option>
                                <% }) %>
                               
                              </select>   
                              <span class="text-danger small" id="error-section"><%= locals.errors && errors.section ? errors.section.msg : null %></span> 
                          </div>

                          <div class="col-8">
                            <label for="category" class="form-label">Categoria</label>
                            <select id="category" class="form-select" name="category">
                                <option value="" selected hidden>Elegir categoria</option>
                                <% categories.forEach(category => { %>
                                  <option value="<%= category.id %>" <%= product.categoryId === category.id ? 'selected' : null %>><%= category.name%></option>
                                <% }) %>
                               
                              </select>   
                              <span class="text-danger small" id="error-category"><%= locals.errors && errors.category ? errors.category.msg : null %></span> 
                          </div>

                        <div class="col-8">
                          <label for="description" class="form-label">Descripcion</label>
                          <textarea style="resize: none; height: 100px;width: 100%;" type="text" placeholder ="Descripcion" class="form-control<%= locals.errors && errors.description ? 'is-invalid' : null %>" id="description"  name="description"><%= product.description %></textarea>
                          <span class="text-danger small" id="error-description"><%= locals.errors && errors.description ? errors.description.msg : null %></span>
                        </div>

                        <div class="col-8">
                          <div class="btn-Subir">
                            <input type='file' id="image" name="image"/>
                            <br/>    
                            <p id="texto"> </p>
                            <br/>   	
                            <img id="img" src="" />
                          </div>
                          <span class="text-danger" id="error-image"><%= locals.errors && errors.image ? errors.image.msg : null%></span>
                        </div>
                        
                        <div class="btn-Agregar">
                          <button type="submit" class="btn btn-primary">Editar</button>
                          
                        </div>
                        <span class="text-danger" id="error-enviar"></span>
                        
                      </form>

                </div>
            </div>
         </div>

     </div>   
    </main>
    <%- include('../partials/footer') %> 
    <script src="/javascripts/productEdit.js"></script>
</body>
</html>